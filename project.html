<!-- Richard Davies, Data Science 2021 -->


<!-- ///////////////////  HEAD //////////////////////////////////// -->

<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8">
    
    <!--The next three lines allow the Vega embed-->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- Tab name -->
    <title>Toby Winn</title>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="facicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;500&display=swap" rel="stylesheet">
        
    <script src="nav.js" defer></script>

</head>
  
<!-- ///////////////////  HEAD //////////////////////////////////// -->



<!-- ///////////////////  START BODY //////////////////////////////////// -->
<body>

    <header class="primary-header flex">
        
        <header class="heading"><span class="orange">Data</span><span class="turquoise">Science</span></header>
        
        <button class="mobile-nav-toggle" data-visible="false">
        </button>

        <nav>
        <ul id="primary-navigation" data-visible="false" class="primary-navigation flex">
            <li class="active">
            <a class="a-nav" href="https://tobywinn.github.io">Home</a>
            </li>
            <li>
            <a class="a-nav" href="https://tobywinn.github.io/project.html">Project</a>
            </li>
            <li>
            <a class="a-nav" href="https://github.com/tobywinn/tobywinn.github.io">Github</a>
            </li>
            <li>
            <a class="a-nav" href="https://rapidcharts.io/datascience">Course site</a>
            </li>
        </ul>
        </nav>
    </header>

    <p class=title1>Investigating the relationship between life satisfaction and income</p>

    <p><span class="bold">Aims: </span>After I graduate I am set to enter the world of investment banking, an industry known for paying well but at significant personal cost. This led me to question the extent to which income is correlated with happiness, starting at a macro level, before focusing on a specific case study.</p>

    <p>I plotted happiness score against log GDP per capita on a choropleth map using data from the <a href="https://worldhappiness.report/">World Happiness Report</a>, where happiness score is defined as the average answer to the World Gallup Poll where participants rank their happiness from 1 to 10.</p>

    <p>I used a bivariate scale to capture both GDP and happiness simultaneously, using a colour palate informed by <a href="https://www.joshuastevens.net/cartography/make-a-bivariate-choropleth-map/">Joshua Stevens'</a> guide. I found terciles for both variables and the created 9 classifications for each possible combination of terciles, the interpretation of which can be seen by clicking on the scale.</p> 
   
    <p>In converting the TopoJSON file to GeoJSON, an error caused countries including Russia and Antarctica to display inaccurately as shown <a href="https://kepler.gl/demo/map?mapUrl=https://dl.dropboxusercontent.com/s/a8mjf2n9edsy201/keplergl_oqzs02s.json">here</a>. I looped through the GeoJSON output and changed the longitude of any coordinates beyond 180 degrees west to the eastern side of the map in <a href="https://colab.research.google.com/drive/1uOGME7xck5ckJLfgvpJdXXVACHrBRmtt?usp=sharing">this code</a>.</p>

    <div class="container">   
        <div id="chart24">
            <script>
                var myChart24 = "project/bivariatescale.json";
                vegaEmbed('#chart24', myChart24);
            </script>
        </div>
        <iframe src="https://kepler.gl/demo/map?mapUrl=https://dl.dropboxusercontent.com/s/lz33wm1lbpxampd/keplergl_vmm8sfa.json"></iframe>
        <div id="chart17">
            <script>
                var myChart17 = "project/bivariatescale.json";
                vegaEmbed('#chart17', myChart17);
            </script>
        </div>
    </div> 

    <p>This chart shows that most developed countries have both high happiness scores and GDP per capita, while developing countries including many in Africa display the opposite characteristics. Overall, tercile of wealth is a good predictor for the tercile of happiness, with most countries falling in categories 1,5 and 9 (same tercile for both variables) as shown in the chart below. However, there are a few interesting anomalies. For example, Turkey is unhappy despite high GDP and while Uzbekistan is happy despite low GDP.</p>

    <div class="container">
        <!-- Illustration of tertiles on scatter -->
        <div class="chart" id="chart27">
            <script>
            var myChart27 = "project/countofcategory.json";
            vegaEmbed('#chart27', myChart27);
            </script>
        </div>
    </div>

    <p class="text-center">The following regression solidifies the validity of this relationship, as indicated by the high R².</p>

    <div class="container">
        <!-- Illustration of tertiles on scatter -->
        <div class="chart" id="chart25">
            <script>
            var myChart25 = "project/HappinessTertiles.json";
            vegaEmbed('#chart25', myChart25);
            </script>
        </div>
    </div>

    <p>I investigated poverty rate as a potential driver behind this relationship. Poverty was defined as living on less than $1.90 per day. As expected, poverty is negatively correlated with happiness, a relationship exaggerated when ignoring countries with poverty rates below 1% as poverty has little impact on most people in these countries. I <a href="https://colab.research.google.com/drive/1zJKk34W1CQVOl2W_orqSVmgEtpKZKSUU?usp=sharing">used</a> the World_Bank_Data python library to download data from the World Bank API, allowing for new data to be downloaded annually upon release.</p>

    <div class="container">
        <!-- Illustration of tertiles on scatter -->
        <div class="chart" id="chart26">
            <script>
            var myChart26 = "week9/HappinessandPoverty.json";
            vegaEmbed('#chart26', myChart26);
            </script>
        </div>
    </div>

    <p>To tackle the root of my question, I analysed the relationship between job satisfaction and pay in FTSE 100 companies. I used Glassdoor which has thousands of ratings and salaries for large companies, providing accurate data.</p>
 
    <p>However, the site blocks scrapers using BeautifulSoup alone. I used selenium and chrome driver to solve this issue. In the absence of an API, I found FTSE 100 constituents by scraping names from the LSE website and saving them into an array. I automated login to the site, navigated through the site and looped through the array of companies, searching for each. For each company, I navigated to the rating and salary sections, scraping data on each which I saved to a DataFrame. Different roles were reported at different frequencies, so for each salary I recorded the number of reports to calculate a weighted average of salaries. Full code is available <a href="https://github.com/tobywinn/tobywinn.github.io/blob/main/project/Scrapers/SalaryRatingsScraper.py">here</a> and a video of the scraper running is available <a href="https://youtu.be/Gp9QmH6-Cfo">here</a>. Running the resulting code will automatically update the data set and corresponding chart but takes over 30 minutes to run.</p>
    
    <p>To update the chart daily, I would run <a href="https://github.com/tobywinn/tobywinn.github.io/blob/main/project/DailyReplication.png">these</a> terminal commands – I decided against this as the scraper uses significant computing power.</p>
    
        <p>I regressed salary against job satisfaction, showing there is very little relationship, as implied by the low R². While pay at the private equity house 3I was the significantly higher than others, satisfaction rating was very low, saying something about the toxic culture in high finance.</p>

    <div class="container">

         <!-- Happiness and GDP -->
        <div class="chart" id="chart23">
            <script>
            var myChart23 = "project/FTSE100SalaryRating.json";
            vegaEmbed('#chart23', myChart23);
            </script>
        </div>

    </div>

    <p>Finally, I looked at rating and compensation in bulge bracket banks. Having scraped ratings from Glassdoor using the method described previously, found salary data from <a href="https://www.arkesden.com/asset/8424/download?1619082748">Arkesden</a>, who are well renowned in the industry for providing accurate compensation data. I scraped the data using Tabula from a PDF released annually in <a href="https://github.com/tobywinn/tobywinn.github.io/blob/main/project/Scrapers/arkesdenscraper.py">this code</a>. This data is released in the same format annually so could be scraped each year upon release.</p>

    <div class="container">

        <!-- Salary and job ratings -->
        <div class="chart" id="chart20">
            <script>
            var myChart20 = "project/SalaryandRatings.json";
            vegaEmbed('#chart20', myChart20);
            </script>
        </div>

    </div>

    <p>At the junior level, banks tend to pay almost identical salaries, while at senior levels there is more variation. At VP level, higher paying banks have higher satisfaction rates, implying that salary plays a greater role in job satisfaction at the senior level.</p>

    <p class="title1">Conclusions</p>

    <p>To conclude, income and happiness are strongly correlated at the macro level. However, there is a more nuanced relationship between income and job satisfaction. In general, there is no clear relationship, highlighting the complex nature of job satisfaction, which incorporates many other factors including company culture. Although, there appears to be some level of correlation in banking, perhaps because the industry attracts money-motivated individuals.</p>

    <footer></footer>

</body>