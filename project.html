<!-- Richard Davies, Data Science 2021 -->


<!-- ///////////////////  HEAD //////////////////////////////////// -->

<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8">
    
    <!--The next three lines allow the Vega embed-->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>

    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">

    <!-- Tab name -->
    <title>Toby Winn</title>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="facicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;500&display=swap" rel="stylesheet">
        
    <script src="nav.js" defer></script>

</head>
  
<!-- ///////////////////  HEAD //////////////////////////////////// -->



<!-- ///////////////////  START BODY //////////////////////////////////// -->
<body>

    <header class="primary-header flex">
        
        <header class="heading"><span class="orange">Data</span><span class="turquoise">Science</span></header>
        
        <button class="mobile-nav-toggle" data-visible="false">
        </button>

        <nav>
        <ul id="primary-navigation" data-visible="false" class="primary-navigation flex">
            <li class="active">
            <a class="a-nav" href="https://tobywinn.github.io">Home</a>
            </li>
            <li>
            <a class="a-nav" href="https://tobywinn.github.io/project.html">Project</a>
            </li>
            <li>
            <a class="a-nav" href="https://github.com/tobywinn/tobywinn.github.io">Github</a>
            </li>
            <li>
            <a class="a-nav" href="https://rapidcharts.io/datascience">Course site</a>
            </li>
        </ul>
        </nav>
    </header>

    <p class=title1>Investigating the relationship between life satisfaction and income</p>

    <p><span class="bold">Aims: </span>After I graduate I am set to enter the world of investment banking, an industry known for paying well but at significant personal cost. This led me to question the extent to which income is correlated with happiness, starting at a macro level, before focusing on a specific case study</p>

    <p>I plotted happiness score against log GDP per capita on a choropleth map using data from the <a href="https://worldhappiness.report/">World Happiness Report</a>, where happiness score is defined as the average answer to the World Gallup Poll which asks participants to rank their happiness from 1 (the worst possible) to 10 (the best possible).</p>

    <p>I used a bivariate scale to capture both GDP and happiness simultaneously, using a visually interpretable colour palate informed by <a href="https://www.joshuastevens.net/cartography/make-a-bivariate-choropleth-map/">Joshua Stevens'</a> guide. I found terciles for both variables and the created 9 classifications for each possible combination of terciles, the interpretation of which can be seen by clicking on the scale.</p> 
   
    <p>In converting the TopoJSON file to GeoJSON, an error caused countries spanning over both 180 degrees east and 180 degrees west of prime meridian (e.g. Russia, Antartica) to display inaccurately as shown <a href="https://kepler.gl/demo/map?mapUrl=https://dl.dropboxusercontent.com/s/a8mjf2n9edsy201/keplergl_oqzs02s.json">here</a>. I looped through the GeoJSON output and changed the longitude of any coordinates beyond 180 degrees west to the eastern side of the map in code that can be found <a href="https://colab.research.google.com/drive/1uOGME7xck5ckJLfgvpJdXXVACHrBRmtt">here</a>.</p>

    <div class="container">   
        <div id="chart24">
            <script>
                var myChart24 = "project/bivariatescale.json";
                vegaEmbed('#chart24', myChart24);
            </script>
        </div>
        <iframe src="https://kepler.gl/demo/map?mapUrl=https://dl.dropboxusercontent.com/s/lz33wm1lbpxampd/keplergl_vmm8sfa.json"></iframe>
        <div id="chart17">
            <script>
                var myChart17 = "project/bivariatescale.json";
                vegaEmbed('#chart17', myChart17);
            </script>
        </div>
    </div> 

    <p>This chart shows that most developed countries have both high happiness scores and GDP per capita, while developing countries including many in Africa display the opposite characteristics. Overall, the tercile of wealth appears to be a good predictor for the tercile of happiness, with the majority of countries falling in categories 1,5 and 9 as shown in the chart below. However, there are a few interesting anomalies. For example, Turkey has a top tercile GDP and bottom tercile happiness score while Uzbekistan has a bottom tercile happiness score and top tercile GDP.</p>

    <div class="container">
        <!-- Illustration of tertiles on scatter -->
        <div class="chart" id="chart27">
            <script>
            var myChart27 = "project/countofcategory.json";
            vegaEmbed('#chart27', myChart27);
            </script>
        </div>
    </div>

    <p>Overall, there is a strong positive correlation, as shown in the following regression, reflecting the above categorisation.</p>

    <div class="container">
        <!-- Illustration of tertiles on scatter -->
        <div class="chart" id="chart25">
            <script>
            var myChart25 = "project/HappinessTertiles.json";
            vegaEmbed('#chart25', myChart25);
            </script>
        </div>
    </div>

    <p>I then investigated poverty rate as a potential driver behind this relationship. Poverty was defined as living on less than $1.90 per day. As expected, poverty is negatively correlated with happiness score. There is a stronger negative correlation when ignoring more developed countries with poverty rates below 1%.</p>

    <div class="container">
        <!-- Illustration of tertiles on scatter -->
        <div class="chart" id="chart26">
            <script>
            var myChart26 = "week9/HappinessandPoverty.json";
            vegaEmbed('#chart26', myChart26);
            </script>
        </div>
    </div>

    <p>To tackle the root of my question, I then moved to an investigation of the relationship between job satisfaction and pay in FTSE 100 companies. I decided to use Glassdoor as, for large companies, it has thousands of ratings and salaries, providing a high level of accuracy.</p>
 
    <p>However, the site blocks scraping using BeautifulSoup alone. I used selenium and chrome driver to solve this issue. In the absence of an API, I found the FTSE 100 constituents by scraping the LSE website looping through multiple pages and saving the names in an array. I automated login to the site, before navigating to the companies section and then looped through the array of FTSE companies, searching each name. For each company, I navigated to the ratings section, and appended the rating to an array before navigating to the salary section, selecting only UK reports in annual pay and looped over the first 10 pages of salaries, appending each salary for a given role to an array as well as the firm name. However, different roles had been reported at different frequencies, so for each salary I also appended the number of reports. This allowed me to form a weighted average of salaries which I then joined (by firm) with the ratings array. Full code can be found <a href="https://github.com/tobywinn/tobywinn.github.io/blob/main/project/Scrapers/SalaryRatingsScraper.py">here</a> and a video of the scraper running can be found <a href="https://youtu.be/Gp9QmH6-Cfo">here</a>.</p>
    
    <p>This resulted in the following chart, where I regressed salary against job satisfaction, showing that there is very little relationship, as implied by the low RÂ². Interestingly, while pay at the private equity house 3I was considerably higher than other firms, the satisfaction rating was the second lowest overall, saying something about the toxic culture in high finance.</p>

    <div class="container">

         <!-- Happiness and GDP -->
        <div class="chart" id="chart23">
            <script>
            var myChart23 = "project/FTSE100SalaryRating.json";
            vegaEmbed('#chart23', myChart23);
            </script>
        </div>

    </div>

    <p>Finally, I looked specifically at rating and compensation in bulge bracket investment banks. Firstly, I scraped the ratings from Glassdoor, using the same method described previously, but filtering for only accounting and finance salaries for each firm as this classification yielded most reviews from investment bankers. I used salary data from Arkesden, who are well renowned in the industry for providing accurate compensation data at the pre-Managing Director level. I scraped the data from a PDF released annualy by Arkesden using Tabula in code that can be found <a href="https://github.com/tobywinn/tobywinn.github.io/blob/main/project/Scrapers/arkesdenscraper.py">here</a>.</p>

    <div class="container">

        <!-- Salary and job ratings -->
        <div class="chart" id="chart20">
            <script>
            var myChart20 = "project/SalaryandRatings.json";
            vegaEmbed('#chart20', myChart20);
            </script>
        </div>

    </div>

    <p>At the junior level banks tend to pay almost identical salaries, while at more senior levels there is more variation. At VP level and above, the banks which pay more appear to also have higher satisfaction rates, implying that salary plays a role in job satisfaction at the senior level.</p>

    <footer></footer>

</body>