{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  
  "title": {
    "text": "Happiness vs GDP",
    "subtitle":"Life Ladder, Log GDP per capita Source: The World Happiness Report",
    "subtitleFontStyle":"italic",
    "subtitleFontSize":10,
    "anchor": "start",
    "color": "white",
    "subtitleColor": "white"
  },
  
    "data": {
    "url": "https://raw.githubusercontent.com/tobywinn/tobywinn.github.io/main/project/HappinessDataTertiles.csv",
    "format": {"type": "csv"}
  },
  
  "height": 280,
  "width": 230,

  "config": {
      "background": "#001219",
      "view": {
        "stroke": "transparent"
        }
    },
  
  "encoding": {

    "x": {
      "field": "Life Ladder",
      "type": "quantitative",
      "title": "Happiness score",
      "axis": {
          "domainColor": "white",
          "tickColor": "white",
          "labelColor": "white",
          "grid": false,
          "titleColor": "white"
        },
      "scale": {"domain": [2,8]}

    },

    "y": {
      "field": "Log GDP per capita",
      "type": "quantitative",
      "axis": {
          "domainColor": "white",
          "tickColor": "white",
          "labelColor": "white",
          "grid": false,
          "titleColor": "white"
        },
      "scale": {"domain": [6,12]}
    },

    "color": {
      "field": "Colour",
      "type": "nominal",
      "scale": {"range": ["#e8e8e8","#b0d5df","#64acbe","#e4acac","#ad9ea5","#627f8c","#c85356","#985356","#574249","#E9C46A"]},
      "title": null,
      "legend": {
        "labelColor": "white"
      }
    },

    "tooltip": [
      {
        "field": "Country", 
        "type": "nominal", 
        "title": "Country"
        },
      {
        "field": "Year", 
        "type": "temporal", 
        "title": "Year"
        },
      {
        "field": "Life Ladder",
        "type": "quantitative",
        "title": "Happiness Score"
        },
      {
        "field": "Log GDP per capita",
        "type": "quantitative",
        "title": "Log GDP per capita"
        }
    ]
  },

  "layer": [
      
    {
      "data": {
        "values": [
          {"Life Ladder": 2, "Log GDP per capita": 6.7208746024435735, "Colour": "Regression"},
          {"Life Ladder": 8, "Log GDP per capita": 12.862549253158495,"Colour": "Regression"}
        ]
      }, 
      "mark": {"type":"line", "clip": true},
      "encoding": {
        "tooltip": null
      }
    },

    {"data": {"url": "https://raw.githubusercontent.com/tobywinn/tobywinn.github.io/main/project/HappinessDataTertiles.csv"}, 
      "mark": {"type": "point", "point": false},
      "transform": [

        {"filter": {
            "field": "Log GDP per capita", 
            "range": [0.0000001,100]}
            },
    
        {"filter": {
            "field": "Life Ladder", 
            "range": [0.0000001, 100]}
            } ,
    
        {"filter": {
            "field": "Year", 
            "range": [
              {"year": 2019, "month": "jan", "date": 1},
              {"year": 2019, "month": "dec", "date": 30}]}
            }  
    
      ]
      
    },

    {
      "data": {
        "values": [
          {"Life Ladder": 3.5, "Log GDP per capita": 11, "text": "RÂ² = 0.566", "Colour": "Regression"}
        ]
      }, 
      "mark": {"type":"text", "color":"red", "fontWeight": "bold"},
      "encoding": {
        "tooltip": null,
        "text": {"field": "text", "type": "nominal"}
      }
    }

  ]
}